# ---------------- IDENTIFIERS ---------------- #

- label: identifier
  description: Unique identifier column
  priority: 100
  priority_real:
    level: critical
    rationale: Core entity identifier; incorrect handling breaks joins and integrity
  min_signals: 1
  when:
    any:
      - signal: abbreviation
        in: [id, uuid, key, pk]
      - signal: role
        equals: identifier
  not:
    any:
      - signal: abbreviation
        in: [flag, is, has, date, time, status]


  recommended_treatment:
    - treat_as_primary_key
    - enforce_uniqueness
    - index_column
    - avoid_aggregations

  expected_conditions:
    - values_should_be_unique
    - values_should_not_be_null
    - values_should_be_stable_over_time
    - enforce_consistent_formatting
    - avoid_numeric_operations
    - enforce_length_limits_if_applicable
    - avoid_special_characters_if_needed
    - values_should_be_consistent_across_datasets



# ---------------- DATES & TIME ---------------- #

- label: date
  description: Date column
  priority: 90
  priority_real:
    level: medium
    rationale: Temporal reference; important for analytics but not entity-defining
  min_signals: 1
  when:
    any:
      - signal: date
      - signal: abbreviation
        in: [date, dt, created, updated]
  not:
    any:
      - signal: abbreviation
        in: [status, type, flag]

  recommended_treatment:
    - parse_as_date
    - standardize_format
    - enable_time_filtering
    - ensure_consistent_timezone_handling

  expected_conditions:
    - values_should_be_valid_dates
    - timezone_should_be_defined_or_implicit
    - enforce_date_ranges_if_applicable
    - handle_null_dates_appropriately

- label: timestamp
  description: Timestamp column
  priority: 95
  priority_real:
    level: medium
    rationale: Event timing; required for ordering and time-based logic
  min_signals: 1
  when:
    any:
      - signal: abbreviation
        in: [timestamp, ts, created_at, updated_at]
      - signal: date
        equals: timestamp
  not:
    any:
      - signal: abbreviation
        in: [status, type, flag]

  recommended_treatment:
    - parse_as_timestamp
    - use_for_event_ordering
    - enable_time_windowing
    - ensure_high_precision_if_needed

  expected_conditions:
    - values_should_be_valid_timestamps
    - monotonicity_may_be_expected
    - timezone_should_be_defined_or_implicit
    - enforce_high_precision_if_needed


# ---------------- MONETARY ---------------- #

- label: monetary_amount
  description: Monetary amount column
  priority: 90
  priority_real:
    level: high
    rationale: Financial values; incorrect handling leads to reporting errors
  min_signals: 2
  when:
    all:
      - signal: currency
      - signal: abbreviation
        in: [amount, price, total, cost, revenue]
  not:
    any:
      - signal: abbreviation
        in: [count, qty, number, flag, is]

  recommended_treatment:
    - parse_as_decimal
    - attach_currency_metadata
    - avoid_float_precision
    - enable_sum_aggregation

  expected_conditions:
    - values_should_be_numeric
    - currency_should_be_consistent
    - handle_negative_values_appropriately
    - enforce_value_ranges_if_applicable

# ---------------- METRICS ---------------- #

- label: metric
  description: Numeric business metric
  priority: 80
  priority_real:
    level: medium
    rationale: Analytical measure; errors affect insights but not structural integrity
  min_signals: 2
  when:
    any:
      - signal: abbreviation
        in: [count, qty, quantity, number, total]
      - signal: role
        equals: metric
  not:
    any:
      - signal: currency

  recommended_treatment:
    - parse_as_numeric
    - enable_aggregation
    - use_in_kpis
    - normalize_if_needed

  expected_conditions:
    - values_should_be_numeric
    - values_should_not_be_text
    - handle_outliers_appropriately
    - enforce_value_ranges_if_applicable

# ---------------- FLAGS / BOOLEANS ---------------- #

- label: flag
  description: Boolean flag column
  priority: 70
  priority_real:
    level: medium
    rationale: Logical switches; misinterpretation impacts business rules
  min_signals: 2
  when:
    any:
      - signal: abbreviation
        in: [is, has, flag, active, enabled]
      - signal: role
        equals: flag
  not:
    any:
      - signal: abbreviation
        in: [id, uuid, key]

  recommended_treatment:
    - parse_as_boolean
    - avoid_text_representation
    - use_for_filtering
    - enforce_binary_values

  expected_conditions:
    - values_should_be_boolean_like
    - domain_should_be_small
    - enforce_consistent_representation
    - values_can_be_nullable

# ---------------- CATEGORICAL ---------------- #

- label: category
  description: Categorical column
  priority: 60
  priority_real:
    level: low
    rationale: Classification aid; low structural risk
  min_signals: 2
  when:
    any:
      - signal: abbreviation
        in: [type, category, status, level, group]
      - signal: role
        equals: category
  not:
    any:
      - signal: date
      - signal: currency

  recommended_treatment:
    - treat_as_categorical
    - encode_as_enum
    - avoid_numeric_operations
    - use_for_grouping


  expected_conditions:
    - domain_should_be_limited
    - values_should_be_consistent
    - avoid_special_characters_if_needed
    - enforce_length_limits_if_applicable
    - values_can_be_nullable



# ---------------- TEXT / DESCRIPTION ---------------- #
- label: text
  description: Free text column
  priority: 50
  priority_real:
    level: low
    rationale: Descriptive content; minimal structural impact
  min_signals: 1
  when:
    any:
      - signal: abbreviation
        in: [description, desc, comment, notes, remarks]
  not:
    any:
      - signal: currency
      - signal: date

  recommended_treatment:
    - treat_as_free_text
    - exclude_from_grouping
    - avoid_indexing_for_metrics

  expected_conditions:
    - values_can_be_nullable
    - values_are_not_structured
    - enforce_length_limits_if_applicable
    - avoid_special_characters_if_needed


# ---------------- GEO ---------------- #

- label: geo_country
  description: Country column
  priority: 85
  min_signals: 1
  when:
    any:
      - signal: abbreviation
        in: [country, nation]
      - signal: role
        equals: country
  not:
    any:
      - signal: abbreviation
        in: [code, id]

- label: geo_city
  description: City column
  priority: 80
  min_signals: 1
  when:
    any:
      - signal: abbreviation
        in: [city, town]
      - signal: role
        equals: city
  not:
    any:
      - signal: abbreviation
        in: [code, id]

  recommended_treatment:
    - treat_as_geographical
    - enable_location_filtering
    - integrate_with_mapping_tools
    - avoid_numeric_operations

  expected_conditions:
    - values_should_be_valid_locations
    - values_should_not_be_numeric
    - values_should_not_be_null
    - enforce_consistency_in_spelling

# ---------------- CONTACT ---------------- #

- label: email
  description: Email address column
  priority: 85
  priority_real:
    level: high
    rationale: Personal identifier; privacy and correctness are critical
  min_signals: 1
  when:
    any:
      - signal: abbreviation
        in: [email, mail]
  not:
    any:
      - signal: abbreviation
        in: [flag, is]

  recommended_treatment:
    - parse_as_email
    - validate_email_format
    - mask_for_privacy
    - avoid_unencrypted_storage
  
  expected_conditions:
    - values_should_be_valid_emails
    - values_should_not_be_null
    - enforce_uniqueness_if_required
    

- label: phone
  description: Phone number column
  priority: 80
  priority_real:
    level: high
    rationale: Personal contact data; sensitive to formatting errors
  min_signals: 1
  when:
    any:
      - signal: abbreviation
        in: [phone, mobile, cellphone]
  not:
    any:
      - signal: abbreviation
        in: [flag, is]

  recommended_treatment:
    - parse_as_phone_number
    - standardize_format
    - mask_for_privacy
    - avoid_unencrypted_storage
  
  expected_conditions:
    - values_should_be_valid_phone_numbers
    - values_should_not_be_null
    - enforce_uniqueness_if_required
